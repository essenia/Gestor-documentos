<div class="container mt-4">
  <h5 class="mb-3">Lista de Usuarios</h5>

  <!-- Spinner mientras carga -->
  <div *ngIf="loading" class="text-center my-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <!-- Tabla de usuarios -->
  <div class="table-responsive" *ngIf="!loading && paginatedUsers.length">
    <table class="table table-sm table-bordered table-striped align-middle text-center">
      <thead class="table-light">
        <tr>
          <th>ID</th>
          <th>Email</th>
          <th>Rol</th>
          <th>Activo</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of paginatedUsers">
          <td>{{ user.id }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.role?.nombre }}</td>
          <td>{{ user.activo ? 'Sí' : 'No' }}</td>
          <td>
            <div class="d-flex justify-content-center gap-1">
              <button class="btn btn-info btn-sm" (click)="viewUser(user)"><i class="fas fa-eye"></i></button>
              <button class="btn btn-warning btn-sm" (click)="editUser(user)"><i class="fas fa-edit"></i></button>
              <button class="btn btn-danger btn-sm" (click)="deleteUser(user)"><i class="fas fa-trash-alt"></i></button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Mensaje si no hay usuarios -->
  <div *ngIf="!loading && !users.length" class="text-center mt-3">
    No hay usuarios registrados
  </div>

  <!-- Paginación -->
  <nav *ngIf="!loading && totalPages > 1" aria-label="Page navigation">
    <ul class="pagination justify-content-center mt-3">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" href="#" (click)="prevPage($event)">Previous</a>
      </li>

      <li class="page-item" *ngFor="let page of pages" [class.active]="page === currentPage">
        <a class="page-link" href="#" (click)="goToPage(page, $event)">{{ page }}</a>
      </li>

      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" href="#" (click)="nextPage($event)">Next</a>
      </li>
    </ul>
  </nav>
</div>
